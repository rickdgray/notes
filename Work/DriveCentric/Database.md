---
title: Database
lastmod: 2024-03-12T13:39:34-05:00
---
# Database
## Migrations
I added this to my powershell profile to make builds easier
```powershell
$env:ASPNETCORE_ENVIRONMENT='Local'
```
The commands to successfully run migrations are these.
```powershell
# location
cd C:\Repos\Atlas-InventoryService\Inventory.Database

# add new migration
dotnet ef migrations add NewMigration --startup-project ..\Inventory.Api\Inventory.Api.csproj --context InventoryContext

```
You'll need to add this line to the top of your migration to allow it to build.
```csharp
// <auto-generated />
```
Then you can upgrade your local database with the new migration.
```powershell
# update database
dotnet ef database update --startup-project ..\Inventory.Api\Inventory.Api.csproj --context InventoryContext
```
Note that it specifically must be this way. `.\InventoryContext` will not work. `InventoryContext.cs` will not work. I don't know why.